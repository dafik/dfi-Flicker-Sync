var fs = require('fs'),
    ini = require('ini');


function Config() {
    var location = process.cwd() + '/appConfig.ini';

    if (!fs.existsSync(location)) {
        var handle = fs.openSync(location, 'wx+');
        var defaults = {
            app: {
                folder: process.cwd()
            }
        }
        fs.writeSync(handle, ini.stringify(defaults))
        fs.closeSync(handle);
    }
    this.getConfig = function () {

        if (typeof config == "undefined") {
            this.config = ini.parse(fs.readFileSync(location, 'utf-8'))
        }

        /*config.scope = 'local'
         config.database.database = 'use_another_database'
         config.paths.default.tmpdir = '/tmp'
         delete config.paths.default.datadir
         config.paths.default.array.push('fourth value')*/

        return this.config
    }

    this.writeConfig = function () {

        fs.writeFileSync(location, ini.stringify(this.config))
    }

}


module.exports = Config


